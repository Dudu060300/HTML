<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Home</title>

    <!-- CSS -->
    <link rel="stylesheet" href="assets/styleHome.css">


  </head>
  <body>

    <!-- NAV BAR -->
    <nav>
      <h1>La Mia App</h1>
      <div class="user-menu" id="userMenu" tabindex="0" aria-haspopup="true" aria-expanded="false" aria-label="Menu utente">
        <div class="user-icon" id="userIcon" aria-hidden="true">U</div>
        <span class="arrow" aria-hidden="true">&#9662;</span>
        <div class="dropdown" id="dropdownMenu" role="menu" aria-label="Menu opzioni utente">
          <span class="dropdown-items username-display" id="userName">Utente</span>
          <a href="#" id="editProfile" role="menuitem" tabindex="-1">Modifica profilo</a>
          <a href="#" id="openSettings" role="menuitem" tabindex="-1">Impostazioni</a>
          <a href="" id="logout" role="menuitem" tabindex="-1">Logout</a>
        </div>
      </div>
    </nav>

    <!-- CORPO PAGINA -->
    <main>
      <h2>Benvenuto nella Home!</h2>
      <p>Hai effettuato l'accesso con successo ðŸŽ‰</p>
    </main>

    <!-- POPUP MODIFICA PROFILO -->
    <div id="overlay" tabindex="-1"></div>
    <div id="profilePopup" role="dialog" aria-modal="true" aria-labelledby="profilePopupTitle" tabindex="-1">
    <button id="closePopupBtn" title="Chiudi" aria-label="Chiudi popup profilo" style="height: 20px;width: 20px;top: 5px;right: 5px;">Ã—</button>

      <!-- TITOLO + CHIUDI POPUP -->
      <div id="barra">
        <h3 id="profilePopupTitle">Modifica Profilo</h3>
      </div>

      <form id="profileForm" novalidate>
        
        <!-- EMAIL -->
        <div class="form-group">
        <label for="emailInput">Email</label>
        <input type="email" id="emailInput" readonly aria-readonly="true" />
        </div>

        <!-- USERNAME + BOTTONE -->
        <div class="form-group">
        <label for="usernameInput">Username</label>
        <div class="username-group">
          <input type="text" id="usernameInput" required class="full-width" />
          <button type="button" id="changeUsernameBtn">Cambia username</button>
        </div>
        </div>

        <!-- VECCHIA PASSWORD + BOTTONE -->
        <div class="form-group">
        <label for="oldPasswordInput" id="oldPasswordLabel">Vecchia Password</label>
        <div class="old-password-group">
          <input type="password" id="oldPasswordInput" placeholder="Inserisci vecchia password" autocomplete="current-password" />
          <button type="button" id="verifyPasswordBtn" aria-describedby="oldPasswordLabel">Verifica</button>
        </div>
        </div>


        <!-- NUOVA PASSWORD -->
        <div class="form-group">
        <label for="newPasswordInput" id="newPasswordLabel" class="hidden">Nuova Password</label>
        <input type="password" id="newPasswordInput" placeholder="Nuova password" class="hidden" autocomplete="new-password" />
        </div>

        <!-- CONFERMA NUOVA PASSWORD -->
        <div class="form-group">
        <label for="confirmPasswordInput" id="confirmPasswordLabel" class="hidden">Conferma Nuova Password</label>
        <input type="password" id="confirmPasswordInput" placeholder="Conferma nuova password" class="hidden" autocomplete="new-password" />
        </div>

        <!-- MESSAGGI DI SUCCESSO O ERRORE -->
        <div id="errorMsg" role="alert" aria-live="assertive"></div>
        <div id="successMsg" role="status" aria-live="polite"></div>

        <!-- BOTTONE SALVA MODIFICHE -->
        <button type="submit">Salva Modifiche</button>
      </form>
    </div>

<!-- POPUP IMPOSTAZIONI -->
<div id="settingsOverlay" tabindex="-1" class="hidden"></div>
<div id="settingsPopup" role="dialog" aria-modal="true" aria-labelledby="settingsTitle" tabindex="-1" class="hidden">
  <button id="closeSettingsBtn" title="Chiudi" aria-label="Chiudi popup impostazioni" style="height: 20px;width: 20px;top: 5px;right: 5px;">Ã—</button>
  <div id="barra">
    <h3 id="settingsTitle">Impostazioni</h3>
  </div>
  <form>
    <div class="form-group">
      <label for="themeSelect">Tema</label>
      <select id="themeSelect">
        <option value="light">Chiaro</option>
        <option value="dark">Scuro</option>
      </select>
    </div>
  </form>
</div>
    <!-- SCRIPT -->
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore-compat.js"></script>
    <script src="assets/scriptHome.js"></script>

    
  </body>
</html>