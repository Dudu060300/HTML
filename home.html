<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <title>Home</title>

    <!-- CSS -->
    <link rel="stylesheet" a href="styleHome.css">


  </head>
  <body>

    <!-- NAV BAR -->
    <nav>
      <h1>La Mia App</h1>
      <div class="user-menu" id="userMenu" tabindex="0" aria-haspopup="true" aria-expanded="false" aria-label="Menu utente">
        <div class="user-icon" id="userIcon" aria-hidden="true">U</div>
        <span class="user-name" id="userName">Utente</span>
        <span class="arrow" aria-hidden="true">&#9662;</span>
        <div class="dropdown" id="dropdownMenu" role="menu" aria-label="Menu opzioni utente">
          <a href="#" id="editProfile" role="menuitem" tabindex="-1">Modifica profilo</a>
          <a href="" id="logout" role="menuitem" tabindex="-1">Logout</a>
        </div>
      </div>
    </nav>

    <!-- CORPO PAGINA -->
    <main>
      <h2>Benvenuto nella Home!</h2>
      <p>Hai effettuato l'accesso con successo ðŸŽ‰</p>
    </main>

    <!-- POPUP MODIFICA PROFILO -->
    <div id="overlay" tabindex="-1"></div>
    <div id="profilePopup" role="dialog" aria-modal="true" aria-labelledby="profilePopupTitle" tabindex="-1">
      
      <!-- TITOLO + CHIUDI POPUP -->
      <div id="barra">
        <h3 id="profilePopupTitle">Modifica Profilo</h3>
        <button id="closePopupBtn" title="Chiudi" aria-label="Chiudi popup profilo">&times;</button>
      </div>

      <form id="profileForm" novalidate>
        
        <!-- EMAIL -->
        <label for="emailInput">Email</label>
        <input type="email" id="emailInput" readonly aria-readonly="true" />

        <!-- USERNAME + BOTTONE -->
        <label for="usernameInput">Username</label>
        <div style="display: flex; gap: 8px; align-items: center;">
          <input type="text" id="usernameInput" required class="full-width" />
          <button type="button" id="changeUsernameBtn">Cambia username</button>
        </div>

        <!-- VECCHIA PASSWORD + BOTTONE -->
        <label for="oldPasswordInput" id="oldPasswordLabel">Vecchia Password</label>
        <div class="old-password-group">
          <input type="password" id="oldPasswordInput" placeholder="Inserisci vecchia password" autocomplete="current-password" />
          <button type="button" id="verifyPasswordBtn" aria-describedby="oldPasswordLabel">Verifica</button>
        </div>


        <!-- NUOVA PASSWORD -->
        <label for="newPasswordInput" id="newPasswordLabel" class="hidden">Nuova Password</label>
        <input type="password" id="newPasswordInput" placeholder="Nuova password" class="hidden" autocomplete="new-password" />


        <!-- CONFERMA NUOVA PASSWORD -->
        <label for="confirmPasswordInput" id="confirmPasswordLabel" class="hidden">Conferma Nuova Password</label>
        <input type="password" id="confirmPasswordInput" placeholder="Conferma nuova password" class="hidden" autocomplete="new-password" />


        <!-- MESSAGGI DI SUCCESSO O ERRORE -->
        <div id="errorMsg" role="alert" aria-live="assertive"></div>
        <div id="successMsg" role="status" aria-live="polite"></div>

        <!-- BOTTONE SALVA MODIFICHE -->
        <button type="submit">Salva Modifiche</button>
      </form>
    </div>


    <!-- SCRIPT -->
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore-compat.js"></script>
    <script src="scriptHome.js"></script>

    
  </body>
</html>
